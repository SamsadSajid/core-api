<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>The transport layer - Core API</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Core API</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Specification <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../document">The document layer</a>
                            </li>
                        
                            <li >
                                <a href="../encoding">The encoding layer</a>
                            </li>
                        
                            <li class="active">
                                <a href=".">The transport layer</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools & resources <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../../tools-and-resources/command-line-client">The command line client</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                
                <li >
                    <a rel="next" href="../encoding">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../tools-and-resources/command-line-client">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/core-api/core-api/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#transport">Transport</a></li>
        
            <li><a href="#the-http-transport">The HTTP transport</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="transport">Transport</h1>
<hr />
<p>The <strong>transport layer</strong> defines how link transitions made at <a href="../document">the document layer</a> are mapped to network requests.</p>
<p>When effecting a link transition, an appropriate transport should be selected based
on the <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier#Syntax">scheme portion of the URL</a>.</p>
<p>Core API currently defines a single HTTP transport.</p>
<hr />
<h2 id="the-http-transport">The HTTP transport</h2>
<p>The HTTP transport supports the <code>http:</code> and <code>https:</code> schemes.</p>
<p>Link transitions for this transport are effected via an HTTP request/response, as determined below.</p>
<h3 id="determining-the-request-method">Determining the request method</h3>
<p>The request method is determined based on the link <code>action</code> property.</p>
<ul>
<li>The link <code>action</code> should be uppercased to give the resulting HTTP method.</li>
<li>When no link <code>action</code> is specified, the default method is <code>GET</code>.</li>
</ul>
<h3 id="encoding-link-parameters">Encoding link parameters</h3>
<p>Link parameters are encoded into the request in different ways, depending on the parameter <code>location</code> property.</p>
<ul>
<li><code>location="path"</code> - The parameter is included in the URL, using <a href="http://tools.ietf.org/html/rfc6570">URL templating</a>.</li>
<li><code>location="query"</code> - The parameter is included in the URL, as a query parameter.</li>
<li><code>location="form"</code> - The parameter is included in request body.</li>
</ul>
<p>When no parameter location is specified, the default is to use <code>location="query"</code> for <code>GET</code> and <code>DELETE</code> actions,
and <code>location="form"</code> for all other actions.</p>
<h4 id="encoding-path-and-query-parameters">Encoding <code>path</code> and <code>query</code> parameters.</h4>
<p>Because path and query parameters can only handle string encodings a simple mapping of the parameter values is required.</p>
<ul>
<li>String values are encoded as-is.</li>
<li>Integer and Number values are encoded as their equivalent string representation.</li>
<li>The <code>true</code> and <code>false</code> values SHOULD be encoded as the literal strings <code>"true"</code> and <code>"false"</code>.</li>
<li>The <code>null</code> value SHOULD be encoded as the empty string, <code>""</code>.</li>
<li>Array and Object parameter values are not supported and their usage SHOULD raise an error.</li>
</ul>
<h4 id="encoding-form-parameters">Encoding <code>form</code> parameters.</h4>
<p>If form parameters are included, then the parameters are treated as a mapping of key-value pairs.
The resulting map MUST be <code>JSON</code> encoded. The encoded parameters MUST then be included in the request body and the <code>Content-Type</code> header of the request SHOULD be set to <code>application/json</code>.</p>
<h3 id="determining-the-request-headers">Determining the request headers</h3>
<p>Requests are free to include any standard HTTP request headers, in particular:</p>
<ul>
<li>An appropriate <code>Accept</code> header MAY be included in the request, indicating the encodings that the client supports.</li>
<li>Clients MAY choose to include additional headers to support authentication, request signing, or other use cases.</li>
</ul>
<hr />
<h3 id="decoding-the-response">Decoding the response</h3>
<p>The result of following a link transition is to either return a Document, or raise an Error condition.</p>
<ul>
<li>The resulting content is decoded by selecting <a href="../encoding">an available codec</a> based on the response <code>Content-Type</code>.</li>
<li>Either a Document or an Error condition MUST be returned by the codec.</li>
<li>If no content is present in the response then the transport layer MUST return an empty document.</li>
</ul>
<h3 id="handling-in-place-transformations">Handling in-place transformations</h3>
<p>An in-place transformation takes place when a link has <code>inplace=true</code>, and the
link is contained by a nested document.</p>
<p>When the <code>inplace</code> property is <code>null</code>, an appropriate default is used:</p>
<ul>
<li>The <code>PUT</code>, <code>PATCH</code> and <code>DELETE</code> methods default to <code>inplace=true</code>.</li>
<li>All other methods default to <code>inplace=false</code>.</li>
</ul>
<p>In the case of an in-place transformation, a <em>partial transformation</em> is effected on
the document tree, as follows:</p>
<ul>
<li>If a Document is returned in the HTTP response: The nested document is replaced with
the returned Document, and the new document tree is returned to the client.</li>
<li>If no content is returned in HTTP response: The nested document is removed from
the document tree, and the new document tree is returned to the client.</li>
</ul>
<h3 id="coercing-4xx-and-5xx-responses-to-errors">Coercing 4xx and 5xx responses to errors</h3>
<p>When a 4xx or 5xx response is received the transport layer SHOULD coerce any
Document returned into an Error. This allows media types that do not support
an error primitive to be handled gracefully.</p>
<p>When a 4xx or 5xx response is received that contains a media type that is
not a supported hypermedia format, the transport MAY attempt to use fallback
media types to decode the content and return an Error. For example, a transport
MAY support graceful handling of error responses that have been returned in
plain <code>application/json</code> and/or <code>text/html</code> formats.</p>
</div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Copyright &copy; 2015, <a href="https://twitter.com/_tomchristie">Tom Christie</a>.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>