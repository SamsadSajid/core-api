<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Hypermedia driven Web APIs.">
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">

        <title>Core API</title>

        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <link href="./css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href=".">Core API</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Specification <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="specification/document/">The document layer</a>
                            </li>
                        
                            <li >
                                <a href="specification/encoding/">The encoding layer</a>
                            </li>
                        
                            <li >
                                <a href="specification/transport/">The transport layer</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools & resources <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="tools-and-resources/command-line-client/">The command line client</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                
                <li class="disabled">
                    <a rel="next" >
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="specification/document/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/core-api/core-api/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#core-api">Core API</a></li>
        
            <li><a href="#example-services">Example services</a></li>
        
            <li><a href="#tooling">Tooling</a></li>
        
            <li><a href="#discussion">Discussion</a></li>
        
            <li><a href="#what-does-it-look-like">What does it look like?</a></li>
        
            <li><a href="#overview">Overview</a></li>
        
            <li><a href="#design-considerations">Design considerations</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="core-api"><a href="http://www.coreapi.org/">Core API</a></h1>
<p><strong>Hypermedia driven Web APIs.</strong></p>
<hr />
<p>Core API is a specification for creating Hypermedia driven Web APIs, that allows you to build rich, expressive, and meaningful interfaces.</p>
<ul>
<li><strong>Robust</strong> - Clients interacting with a Core API service always have the available interactions presented to them. This allows for generic client libraries that are always automatically up to date with the services they interact with.</li>
<li><strong>Expressive</strong> - Documents may be nested, and support in-place transitions, allowing you to express rich and complex interfaces without having to make multiple network calls.</li>
<li><strong>Explorable</strong> - Client libraries allow you to inspect and interact with a Core API interface, and the HTML encoding allows for fully web browsable APIs.</li>
<li><strong>Flexible</strong> - Rather than be coupled to a particular encoding, Core API separates out the document, encoding and transport concerns. This means that client libraries can communicate with a number of different hypermedia formats. Equally, Core API services can make themselves available over a number of different encodings.</li>
</ul>
<h4 id="example-services">Example services</h4>
<p>You can interact with these example services either directly through your browser, by installing the command-line client, or by using one of the client libraries.</p>
<ul>
<li><strong>Notes</strong> - Create, update and delete items from a list of notes. <a href="http://notes.coreapi.org/">http://notes.coreapi.org/</a></li>
<li><strong>Game</strong> - Find the treasure in 5 turns or less. <a href="http://game.coreapi.org/">http://game.coreapi.org/</a></li>
</ul>
<p>For example, let's try interacting with the "Game" service using the command line client.</p>
<p>First make sure to <a href="https://www.python.org/downloads/">install Python</a>, then...</p>
<pre><code class="bash">    $ pip install coreapi  # Use Python's package manager `pip` to install the command-line client.
    $ coreapi get http://game.coreapi.org/
    &lt;Home &quot;http://game.coreapi.org/&quot;&gt;
        new_game()
    $ coreapi action new_game
    &lt;Game &quot;http://game.coreapi.org/dee07521-6862-4744-95ec-812db90135bd&quot;&gt;
        board: &quot;...a\n...b\n...c\n123&quot;
        description: &quot;5 turns remaining.&quot;
        new_game()
        play([position])
    $ coreapi action play --param position=b3
    &lt;Game &quot;http://game.coreapi.org/dee07521-6862-4744-95ec-812db90135bd&quot;&gt;
        board: &quot;...a\n..xb\n...c\n123&quot;
        description: &quot;4 turns remaining.&quot;
        new_game()
        play([position])
</code></pre>

<h4 id="tooling">Tooling</h4>
<ul>
<li>A <a href="http://www.coreapi.org/tools-and-resources/command-line-client/">command line client</a> for interacting with services from the console.</li>
<li>There is a complete <a href="https://github.com/core-api/python-client">Python client library</a> for Core API.</li>
<li>A <a href="https://github.com/core-api/javascript-client">Javascript client library</a> is currently planned.</li>
<li>We have an <a href="https://github.com/core-api/example-server">example server implementation</a>, for demonstration purposes.</li>
</ul>
<h4 id="discussion">Discussion</h4>
<p>For news and updates follow <a href="https://twitter.com/core_api">@core-api</a>, or <a href="https://twitter.com/_tomchristie">@_tomchristie</a>.</p>
<p>For discussion of the tools and specification, use the <a href="https://groups.google.com/forum/#!forum/hypermedia-web">Hypermedia Web mailing list</a>.</p>
<h4 id="what-does-it-look-like">What does it look like?</h4>
<p>Core API has a lightweight JSON encoding called 'Core JSON'. For example:</p>
<pre><code>{
    "_type": "document",
    "_meta": {
        "url": "/",
        "title": "Notes"
    },
    "notes": [
        {
            "_type": "document",
            "_meta": {
                "url": "/1de153fe-6747-41d3-bc0e-d9d7d87e448a",
                "title": "Note"
            },
            "complete": false,
            "description": "Email venue about conference dates",
            "delete": {
                "_type": "link",
                "action": "delete"
            },
            "edit": {
                "_type": "link",
                "action": "put",
                "fields": [
                    {
                        "name": "description"
                    }, {
                        "name": "complete"
                    }
                ]
            }
        }
    ],
    "add_note": {
        "_type": "link",
        "action": "post",
        "fields": [
            {
                "name": "description",
                "required": true
            }
        ]
    }
}
</code></pre>
<p>Additionally, an HTML based encoding is defined. This allows servers to present APIs that can be interacted with directly from a Web browser. The previous example rendered in HTML looks like this:</p>
<p><img alt="HTML encoding example" src="http://www.coreapi.org/images/html-encoding.png" /></p>
<hr />
<h2 id="overview">Overview</h2>
<p>There are three layers to the Core API specification.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.coreapi.org/specification/document/">Document layer</a></td>
<td>The abstract object interface that clients interact with.</td>
</tr>
<tr>
<td><a href="http://www.coreapi.org/specification/encoding/">Encoding layer</a></td>
<td>The mapping between a Document and a byte string.</td>
</tr>
<tr>
<td><a href="http://www.coreapi.org/specification/transport/">Transport layer</a></td>
<td>How document interactions are mapped to network requests.</td>
</tr>
</tbody>
</table>
<p>The following is an overview of the document layer, describing how the client interacts with a Core API interface.</p>
<h4 id="document">Document</h4>
<p>Documents are the basic building blocks of Core API.</p>
<p>Documents are key-value pairs that contain the data and actions presented by the interface. Documents always have an associated URL, and should also have a title.</p>
<p>The top level element in any Core API interface is always a Document.</p>
<p>Let's take a look at a Core API document by using the Python client library.</p>
<pre><code>$ pip install coreapi
$ python
&gt;&gt;&gt; import coreapi
&gt;&gt;&gt; doc = coreapi.get('http://notes.coreapi.org/')
&gt;&gt;&gt; print(doc)
&lt;Notes "http://notes.coreapi.org/"&gt;
    notes: [
        &lt;Note "http://notes.coreapi.org/1f1bc8d6-9411-48d9-a2fc-6d8b82a48888"&gt;
            complete: true
            description: "Write command line client"
            delete()
            edit([description], [complete]),
        &lt;Note "http://notes.coreapi.org/123d4e35-cb09-40c3-98d3-d119e9079fca"&gt;
            complete: true
            description: "Example"
            delete()
            edit([description], [complete]),
        &lt;Note "http://notes.coreapi.org/0ace0b3b-9db2-4c10-989e-76c5c61265e7"&gt;
            complete: true
            description: "Fix the kitchen door"
            delete()
            edit([description], [complete])
    ]
    add_note(description)
</code></pre>
<p>We've got a document here that contains a couple of other nested documents. We can also see the actions and data that the interface exposes.</p>
<h4 id="links">Links</h4>
<p>Links are the available points of interaction that the interface presents.</p>
<p>Links have an associated URL and action, and may accept a set of named parameters.</p>
<p>Links inside nested documents may optionally be marked as an "in-place" transition.
Links that are marked as in-place effect a partial transformation on the document,
modifying or removing the nested document from the document tree.</p>
<p>The 'put', 'patch' and 'delete' actions default to being in-place.</p>
<p>Let's return to the python client library, and take a look at calling some links.
We'll start by removing all the existing notes:</p>
<pre><code>&gt;&gt;&gt; while doc["notes"]:
&gt;&gt;&gt;     doc = coreapi.action(doc, ['notes', 0, 'delete'])
</code></pre>
<p>Calling <code>.action()</code> effects a transition on the given link, and returns a
new document instance.</p>
<p>There should now be no notes remaining:</p>
<pre><code>&gt;&gt;&gt; print(doc)
&lt;Notes "http://notes.coreapi.org/"&gt;
    notes: []
    add_note(description)
</code></pre>
<p>Okay, let's create a new note:</p>
<pre><code>&gt;&gt;&gt; doc = coreapi.action(doc, 'add_note', params={'description': 'Email venue about conference dates'})
&gt;&gt;&gt; print(doc)
&lt;Notes "http://notes.coreapi.org/"&gt;
    notes: [
        &lt;Note "http://notes.coreapi.org/e7785f34-2b74-41d2-ab3f-f754f688987c/"&gt;
            complete: false
            description: "Email venue about conference dates"
            delete()
            edit([description], [complete])
    ]
    add_note(description)
</code></pre>
<p>Finally we'll update the state of the note we've just created:</p>
<pre><code>&gt;&gt;&gt; doc = coreapi.action(doc, ['notes', 0, 'edit'], params={'complete': True})
&gt;&gt;&gt; print(doc)
&lt;Notes "http://notes.coreapi.org/"&gt;
    notes: [
        &lt;Note "http://notes.coreapi.org/e7785f34-2b74-41d2-ab3f-f754f688987c/"&gt;
            complete: true
            description: "Email venue about conference dates"
            delete()
            edit([description], [complete])
    ]
    add_note(description)
</code></pre>
<h4 id="data-primitives">Data primitives</h4>
<p>Data primitives are the set of basic datatypes that may be used to represent data in the interface.</p>
<p>Core API supports the same subset of data primitives as JSON. These are Object, Array, String, Integer, Number, <code>true</code>, <code>false</code>, and <code>null</code>.</p>
<pre><code>&gt;&gt;&gt; doc['notes'][0]['description']
'Email venue about conference dates'
&gt;&gt;&gt; doc['notes'][0]['complete']
True
</code></pre>
<h4 id="errors">Errors</h4>
<p>Following a link may result in an error. An error is a set of key-value pairs, which is used to represent any error information associated with the failed transition.</p>
<p>Encountering an error prevents any transition from taking place, and will normally be represented by an exception or other error status by the client library.</p>
<pre><code>&gt;&gt;&gt; coreapi.action(doc, 'add_note', params={'description': 'x' * 999999})
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
coreapi.exceptions.ErrorMessage: {"description": ["Ensure this parameter has no more than 100 characters."]}
</code></pre>
<hr />
<h2 id="design-considerations">Design considerations</h2>
<p>Because Core API documents are composable there are a few design decisions you'll want to be aware of, that may not exist in other API systems.</p>
<h4 id="rich-interfaces">Rich interfaces</h4>
<p>The status quo with many Web APIs today is to have a close relationship between items in the storage backend and API endpoints. While Core API <em>does</em> allow you to build collection type APIs it can also express richer interfaces.</p>
<p>You probably want to think of a Core API interface as being similar to a web page, but without any layout or style information. You can embed multiple controls and related elements inside a single document.</p>
<h4 id="actions-should-effect-child-elements">Actions should effect child elements</h4>
<p>When in-place link transitions are followed they will only ever update the part of the document that the link is contained by. You should make sure that links are always included at the topmost level of any elements they might effect.</p>
<p>Failing to follow this constraint will mean that clients may need to have some implicit knowledge about which other parts of a document to reload once a transition takes place. This introduces coupling, and increases the number of required network requests.</p>
<h4 id="interlinking-vs-nesting">Interlinking vs nesting</h4>
<p>When building a Core API interface you'll need to decide on when to link to associated document, and when to nest an associated document. The former implies a necessary network request to retrieve the document, while the later embeds the document directly.</p>
<p>Normally this decision should be self-evident, and will depend on the type of the relationship that the link expresses.</p>
</div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Copyright &copy; 2015, <a href="https://twitter.com/_tomchristie">Tom Christie</a>.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/prettify-1.0.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script src="./js/base.js"></script>
    </body>
</html>